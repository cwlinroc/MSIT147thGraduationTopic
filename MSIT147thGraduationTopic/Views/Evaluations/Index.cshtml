@model MSIT147thGraduationTopic.Models.ViewModels.EvaluationVM
@{
    ViewData["Title"] = "Index";





}



<div class="container">
    <div class="row mt-3">
        <div class="col-2"></div>
        <div class="col-8 ">



            <div class="d-flex mt-3 ">
                <div id="Avatar" class="d-flex align-items-center ">
                    <img src="http://picsum.photos/80/80?random=10" class="rounded-circle" />
                </div>
                <div class="d-flex align-items-center mx-3">
                    <h5 id="NickName" style="font-family: Microsoft JhengHei;">飛天小女警</h5>
                </div>
                <div class="ms-auto d-flex flex-column justify-content-end align-items-end ">
                    <h6 id="OrderId">訂單編號:000000  </h6>
                </div>
            </div>

            <div style="border-block-color:#FFDDAA;border-width: 2px">
                <div class="mt-4 d-flex align-items-center">
                    <div class="d-flex rounded-3 px-1 " style="background-color:#FFDDAA">
                        <div class="mx-1 mt-2">
                            <h6 id="MerchandiseName"> 商品名稱</h6>
                        </div>
                        <div class="mt-2">
                            <h6 id="SpecName">商品規格 </h6>
                        </div>
                    </div>

                    <div class="d-flex ms-auto float-end" >
                        <div id="score" class="float-end rounded-3 mx-3 py-1" style="background-color:	#F1E1FF">
                            <img id="stsr1" src="/images/空星星.png" style="height:27px" />
                            <img id="stsr2" src="/images/空星星.png" style="height:27px" />
                            <img id="stsr3" src="/images/空星星.png" style="height:27px" />
                            <img id="stsr4" src="/images/空星星.png" style="height:27px" />
                            <img id="stsr5" src="/images/空星星.png" style="height:27px" />
                        </div>                        
                    </div>                  
                </div>               
                <div class="form-floating mx-2 my-2">
                    <textarea id="commentText" class="form-control" placeholder="Leave a comment here" style="height: 100px"></textarea>
                    <label for="floatingTextarea2">評論</label>
                    <button id="send" type="submit" class="btn btn-primary float-end mt-2">送出</button>
                    <button id="edit" type="submit" class="btn btn-primary float-end mt-2 mx-1">編輯</button>

                </div>

            </div>
        </div>
        <div class="col-2"></div>
    </div>
</div>
@section Scripts{
    <script>
        const score = document.querySelector('#score');
        const btnedit = document.querySelector('#edit');
        const orderId = document.querySelector('#OrderId');

        const xhr = new XMLHttpRequest();
        xhr.open('Get', '/ApiEvaluation/index')
        xhr.send();
        xhr.addEventListener("load",function(){
            const datas = JSON.parse(xhr.responseText);

            const evaluationdata = datas.map(item => {
                return(`
                <div style="border-block-color:#FFDDAA;border-width: 2px">
                <div class="mt-4 d-flex align-items-center">
                    <div class="d-flex rounded-3 px-1 " style="background-color:#FFDDAA">
                        <div class="mx-1 mt-2">
                            <h6 id="MerchandiseName">${datas.MerchandiseName}</h6>
                        </div>
                        <div class="mt-2">
                            <h6 id="SpecName">${datas.SpecName} </h6>
                        </div>
                    </div>

                    <div class="d-flex ms-auto float-end">
                        <div id="score" class="float-end">
                            <img src="/images/一星.png" style="height:40px" />
                            <img src="/images/二星.png" style="height:40px" />
                            <img src="/images/三星.png" style="height:40px" />
                            <img src="/images/四星.png" style="height:40px" />
                            <img src="/images/五星.png" style="height:40px" />
                        </div>
                    </div>
                    </div>
                    <div class="form-floating mx-2 my-2">
                        <textarea id="commentText" class="form-control" placeholder="Leave a comment here" style="height: 100px"></textarea>
                        <label for="floatingTextarea2">評論</label>
                        <button id="send" type="submit" class="btn btn-primary float-end mt-2">送出</button>
                        <button id="edit" type="submit" class="btn btn-primary float-end mt-2 mx-1">編輯</button>
                    </div>
                </div>`)


            })
        })



        //const scoreValue = parseFloat(score.value);

        //if (scoreValue == 0) {
        //    btnedit.style.display = 'block';
        //} else {
        //    btnedit.style.display = 'none';
        //}




    </script>
    <script src="../js/jquery-3.7.0.min.js"></script>
    <script>
        const starImages = [
            "/images/空星星.png",
            "/images/一星.png",
            "/images/二星.png",
            "/images/三星.png",
            "/images/四星.png",
            "/images/五星.png",
        ];

        const $stars = $('#score img');

        $stars.hover(
            function () {
                const index = $stars.index(this);
                for (let i = 0; i <= index; i++) {
                    $stars.eq(i).attr('src', starImages[i + 1]);
                }
            },
            function () {
                $stars.attr('src', starImages[0]);
            }
        );
        $img.click(function () {
            $img.prop("src", "images/star.gif");
            $("img:lt(" + ($(this).index() + 1) + ")").prop("src", "images/chngstar.gif");

        })
        $img.dblclick(function () {

            $img.prop("src", "/images/空星星.png");
        })
    </script>
}


